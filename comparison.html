<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¾é¢œç®—æ³•å¯¹æ¯” - CPU vs GPU</title>
    
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="styles.css">
    
    <style>
        .comparison-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }
        
        .comparison-box {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .comparison-box.cpu {
            border-color: #ff6b6b;
        }
        
        .comparison-box.gpu {
            border-color: #667eea;
            background: linear-gradient(135deg, #f8f9ff 0%, #e8ecff 100%);
        }
        
        .comparison-box h3 {
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .cpu-badge {
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .gpu-badge {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            animation: glow 2s infinite;
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px rgba(102, 126, 234, 0.5); }
            50% { box-shadow: 0 0 20px rgba(102, 126, 234, 0.8); }
        }
        
        .performance-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .performance-table th,
        .performance-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .performance-table th {
            background-color: #f8f9fa;
            font-weight: bold;
        }
        
        .performance-table .gpu-row {
            background-color: #e8f2ff;
        }
        
        .performance-table .cpu-row {
            background-color: #fff5f5;
        }
        
        .demo-links {
            display: flex;
            gap: 20px;
            margin: 30px 0;
            justify-content: center;
        }
        
        .demo-link {
            display: inline-block;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 10px;
            font-weight: bold;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .demo-link.cpu {
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            color: white;
        }
        
        .demo-link.gpu {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }
        
        .demo-link:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        
        .algorithm-explanation {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
        }
        
        .code-snippet {
            background: #1e1e1e;
            color: #dcdcdc;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 15px 0;
        }
        
        .highlight {
            color: #569cd6;
        }
        
        .comment {
            color: #6a9955;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ”¬ ç¾é¢œç®—æ³•æŠ€æœ¯å¯¹æ¯”</h1>
            <p>CPU OpenCV.js vs GPU WebGL Shader å®ç°å¯¹æ¯”åˆ†æ</p>
        </header>

        <div class="main-content">
            <!-- åœ¨çº¿æ¼”ç¤ºé“¾æ¥ -->
            <div class="demo-links">
                <a href="index.html" class="demo-link cpu">
                    ğŸ–¥ï¸ CPUç‰ˆæœ¬æ¼”ç¤º<br>
                    <small>OpenCV.js + MediaPipe</small>
                </a>
                <a href="webgl-beauty.html" class="demo-link gpu">
                    ğŸš€ GPUç‰ˆæœ¬æ¼”ç¤º<br>
                    <small>WebGL Shader + MediaPipe</small>
                </a>
            </div>

            <!-- æ€§èƒ½å¯¹æ¯” -->
            <div class="algorithm-explanation">
                <h3>âš¡ æ€§èƒ½å¯¹æ¯”åˆ†æ</h3>
                <table class="performance-table">
                    <thead>
                        <tr>
                            <th>å¯¹æ¯”é¡¹ç›®</th>
                            <th>CPUç‰ˆæœ¬ (OpenCV.js)</th>
                            <th>GPUç‰ˆæœ¬ (WebGL Shader)</th>
                            <th>æ€§èƒ½æå‡</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="cpu-row">
                            <td><strong>å¤„ç†æ—¶é—´</strong></td>
                            <td>500-2000ms</td>
                            <td>10-50ms</td>
                            <td><span style="color: #28a745;">10-40å€</span></td>
                        </tr>
                        <tr class="gpu-row">
                            <td><strong>å†…å­˜ä½¿ç”¨</strong></td>
                            <td>é«˜ï¼ˆå¤šæ¬¡çŸ©é˜µå¤åˆ¶ï¼‰</td>
                            <td>ä½ï¼ˆGPUç›´æ¥å¤„ç†ï¼‰</td>
                            <td><span style="color: #28a745;">3-5å€é™ä½</span></td>
                        </tr>
                        <tr class="cpu-row">
                            <td><strong>å˜å½¢è´¨é‡</strong></td>
                            <td>ä¸­ç­‰ï¼ˆçº¿æ€§æ’å€¼ï¼‰</td>
                            <td>é«˜ï¼ˆäºšåƒç´ ç²¾åº¦ï¼‰</td>
                            <td><span style="color: #28a745;">è´¨é‡æå‡</span></td>
                        </tr>
                        <tr class="gpu-row">
                            <td><strong>å®æ—¶æ€§</strong></td>
                            <td>ä¸æ”¯æŒ</td>
                            <td>æ”¯æŒ60FPS</td>
                            <td><span style="color: #28a745;">å®æ—¶å¤„ç†</span></td>
                        </tr>
                        <tr class="cpu-row">
                            <td><strong>å…¼å®¹æ€§</strong></td>
                            <td>è¾ƒå¥½</td>
                            <td>éœ€WebGLæ”¯æŒ</td>
                            <td><span style="color: #ffc107;">ç•¥ä½</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- ç®—æ³•å®ç°å¯¹æ¯” -->
            <div class="comparison-section">
                <div class="comparison-box cpu">
                    <h3>ğŸ–¥ï¸ CPUç‰ˆæœ¬å®ç° <span class="cpu-badge">OpenCV.js</span></h3>
                    
                    <h4>ç‰¹ç‚¹ï¼š</h4>
                    <ul>
                        <li>åŸºäºOpenCV.jsçš„å›¾åƒå¤„ç†</li>
                        <li>JavaScriptå•çº¿ç¨‹æ‰§è¡Œ</li>
                        <li>å†…å­˜é¢‘ç¹åˆ†é…é‡Šæ”¾</li>
                        <li>çŸ©é˜µè¿ç®—è¾ƒæ…¢</li>
                    </ul>
                    
                    <h4>æ ¸å¿ƒç®—æ³•ï¼š</h4>
                    <div class="code-snippet">
<span class="comment">// CPUç‰ˆæœ¬ - å¾„å‘å˜å½¢</span>
<span class="highlight">for</span> (let y = 0; y &lt; height; y++) {
    <span class="highlight">for</span> (let x = 0; x &lt; width; x++) {
        <span class="comment">// è®¡ç®—è·ç¦»</span>
        const distance = <span class="highlight">Math.sqrt</span>(dx*dx + dy*dy);
        
        <span class="comment">// åº”ç”¨å˜å½¢</span>
        <span class="highlight">if</span> (distance &lt; radius) {
            const weight = 1.0 - (1.0 - weight*weight) * delta;
            newX = center.x + dx * weight;
            newY = center.y + dy * weight;
        }
        
        <span class="comment">// è®¾ç½®æ˜ å°„çŸ©é˜µ</span>
        mapX.<span class="highlight">floatPtr</span>(y, x)[0] = newX;
        mapY.<span class="highlight">floatPtr</span>(y, x)[0] = newY;
    }
}
<span class="comment">// åº”ç”¨é‡æ˜ å°„</span>
cv.<span class="highlight">remap</span>(src, dst, mapX, mapY, cv.INTER_CUBIC);
                    </div>
                    
                    <h4>ä¼˜åŠ¿ï¼š</h4>
                    <ul>
                        <li>âœ… å®ç°ç®€å•ï¼Œæ˜“äºè°ƒè¯•</li>
                        <li>âœ… å…¼å®¹æ€§å¥½</li>
                        <li>âœ… åŠŸèƒ½ä¸°å¯Œï¼ˆOpenCVåº“ï¼‰</li>
                    </ul>
                    
                    <h4>åŠ£åŠ¿ï¼š</h4>
                    <ul>
                        <li>âŒ å¤„ç†é€Ÿåº¦æ…¢</li>
                        <li>âŒ å†…å­˜å ç”¨é«˜</li>
                        <li>âŒ ä¸æ”¯æŒå®æ—¶å¤„ç†</li>
                        <li>âŒ å˜å½¢æ•ˆæœä¸€èˆ¬</li>
                    </ul>
                </div>

                <div class="comparison-box gpu">
                    <h3>ğŸš€ GPUç‰ˆæœ¬å®ç° <span class="gpu-badge">WebGL Shader</span></h3>
                    
                    <h4>ç‰¹ç‚¹ï¼š</h4>
                    <ul>
                        <li>åŸºäºWebGLç€è‰²å™¨ç¨‹åº</li>
                        <li>GPUå¹¶è¡Œè®¡ç®—</li>
                        <li>çº¹ç†ç›´æ¥å¤„ç†</li>
                        <li>ç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“</li>
                    </ul>
                    
                    <h4>æ ¸å¿ƒç®—æ³•ï¼š</h4>
                    <div class="code-snippet">
<span class="comment">// GPUç‰ˆæœ¬ - ç‰‡æ®µç€è‰²å™¨</span>
<span class="highlight">vec2</span> enlargeEye(<span class="highlight">vec2</span> texCoord, <span class="highlight">vec2</span> center, 
               <span class="highlight">float</span> radius, <span class="highlight">float</span> delta) {
    
    <span class="comment">// è®¡ç®—å½’ä¸€åŒ–è·ç¦»</span>
    <span class="highlight">float</span> weight = <span class="highlight">distance</span>(
        <span class="highlight">vec2</span>(texCoord.x, texCoord.y / aspectRatio), 
        <span class="highlight">vec2</span>(center.x, center.y / aspectRatio)
    ) / radius;
    
    <span class="comment">// å¹³æ»‘è¡°å‡å‡½æ•°</span>
    weight = 1.0 - (1.0 - weight * weight) * delta;
    weight = <span class="highlight">clamp</span>(weight, 0.0, 1.0);
    
    <span class="comment">// åº”ç”¨å˜å½¢</span>
    texCoord = center + (texCoord - center) * weight;
    <span class="highlight">return</span> texCoord;
}

<span class="comment">// ä¸»å‡½æ•°</span>
<span class="highlight">void</span> main() {
    <span class="highlight">vec2</span> texCoord = v_texCoord;
    texCoord = <span class="highlight">bigEye</span>(texCoord);
    texCoord = <span class="highlight">thinFace</span>(texCoord);
    
    gl_FragColor = <span class="highlight">texture2D</span>(u_texture, texCoord);
}
                    </div>
                    
                    <h4>ä¼˜åŠ¿ï¼š</h4>
                    <ul>
                        <li>âœ… å¤„ç†é€Ÿåº¦æå¿«ï¼ˆGPUå¹¶è¡Œï¼‰</li>
                        <li>âœ… æ”¯æŒå®æ—¶å¤„ç†</li>
                        <li>âœ… å†…å­˜ä½¿ç”¨ä½</li>
                        <li>âœ… å˜å½¢æ•ˆæœè‡ªç„¶</li>
                        <li>âœ… äºšåƒç´ ç²¾åº¦</li>
                    </ul>
                    
                    <h4>åŠ£åŠ¿ï¼š</h4>
                    <ul>
                        <li>âŒ éœ€è¦WebGLæ”¯æŒ</li>
                        <li>âŒ ç€è‰²å™¨ç¼–ç¨‹å¤æ‚</li>
                        <li>âŒ è°ƒè¯•å›°éš¾</li>
                    </ul>
                </div>
            </div>

            <!-- æŠ€æœ¯æ¶æ„å¯¹æ¯” -->
            <div class="algorithm-explanation">
                <h3>ğŸ—ï¸ æŠ€æœ¯æ¶æ„å¯¹æ¯”</h3>
                
                <div class="comparison-section">
                    <div class="comparison-box cpu">
                        <h4>CPUç‰ˆæœ¬æ¶æ„</h4>
                        <div class="code-snippet">
<span class="comment">// å¤„ç†æµç¨‹</span>
MediaPipe <span class="highlight">â†’</span> è·å–å…³é”®ç‚¹
    â†“
OpenCV.js <span class="highlight">â†’</span> åˆ›å»ºæ˜ å°„çŸ©é˜µ
    â†“
CPUè®¡ç®— <span class="highlight">â†’</span> é€åƒç´ å˜å½¢
    â†“
å†…å­˜æ‹·è´ <span class="highlight">â†’</span> æ˜¾ç¤ºç»“æœ
                        </div>
                        <p><strong>ç‰¹ç‚¹ï¼š</strong>ä¸²è¡Œå¤„ç†ï¼Œå†…å­˜å¼€é”€å¤§</p>
                    </div>

                    <div class="comparison-box gpu">
                        <h4>GPUç‰ˆæœ¬æ¶æ„</h4>
                        <div class="code-snippet">
<span class="comment">// å¤„ç†æµç¨‹</span>
MediaPipe <span class="highlight">â†’</span> è·å–å…³é”®ç‚¹
    â†“
WebGL <span class="highlight">â†’</span> ä¼ é€’åˆ°GPU
    â†“
Shaderå¹¶è¡Œ <span class="highlight">â†’</span> æ‰€æœ‰åƒç´ åŒæ—¶å¤„ç†
    â†“
GPUæ¸²æŸ“ <span class="highlight">â†’</span> ç›´æ¥è¾“å‡ºç»“æœ
                        </div>
                        <p><strong>ç‰¹ç‚¹ï¼š</strong>å¹¶è¡Œå¤„ç†ï¼Œé›¶æ‹·è´ï¼Œç¡¬ä»¶åŠ é€Ÿ</p>
                    </div>
                </div>
            </div>

            <!-- ç®—æ³•ç»†èŠ‚å¯¹æ¯” -->
            <div class="algorithm-explanation">
                <h3>ğŸ” ç®—æ³•å®ç°ç»†èŠ‚</h3>
                
                <h4>1. å¤§çœ¼ç®—æ³•å¯¹æ¯”</h4>
                <p><strong>CPUç‰ˆæœ¬ï¼š</strong>ä½¿ç”¨OpenCVçš„remapå‡½æ•°ï¼Œéœ€è¦åˆ›å»ºæ˜ å°„çŸ©é˜µï¼Œç„¶åé€åƒç´ é‡æ˜ å°„</p>
                <p><strong>GPUç‰ˆæœ¬ï¼š</strong>ç›´æ¥åœ¨ç‰‡æ®µç€è‰²å™¨ä¸­è®¡ç®—çº¹ç†åæ ‡å˜æ¢ï¼ŒGPUå¹¶è¡Œå¤„ç†æ‰€æœ‰åƒç´ </p>
                
                <h4>2. ç˜¦è„¸ç®—æ³•å¯¹æ¯”</h4>
                <p><strong>CPUç‰ˆæœ¬ï¼š</strong>åŸºäºè„¸éƒ¨è½®å»“ç‚¹çš„å¾„å‘æ”¶ç¼©ï¼Œä½¿ç”¨äºŒæ¬¡å‡½æ•°è¡°å‡</p>
                <p><strong>GPUç‰ˆæœ¬ï¼š</strong>å‚è€ƒGPUPixelçš„curveWarpç®—æ³•ï¼Œå¤šç‚¹æ›²çº¿å˜å½¢ï¼Œæ•ˆæœæ›´è‡ªç„¶</p>
                
                <h4>3. ç£¨çš®ç®—æ³•å¯¹æ¯”</h4>
                <p><strong>CPUç‰ˆæœ¬ï¼š</strong>é«˜æ–¯æ¨¡ç³Š + è’™ç‰ˆæ··åˆï¼Œéœ€è¦å¤šæ¬¡å†…å­˜åˆ†é…</p>
                <p><strong>GPUç‰ˆæœ¬ï¼š</strong>åŒè¾¹æ»¤æ³¢ç€è‰²å™¨ï¼Œä¿è¾¹ç¼˜å»å™ªç‚¹ï¼Œä¸€æ¬¡å¤„ç†å®Œæˆ</p>
            </div>

            <!-- æ€»ç»“ -->
            <div class="algorithm-explanation">
                <h3>ğŸ“Š æ€»ç»“å»ºè®®</h3>
                <div class="comparison-section">
                    <div class="comparison-box cpu">
                        <h4>é€‚ç”¨åœºæ™¯ - CPUç‰ˆæœ¬</h4>
                        <ul>
                            <li>ğŸ¯ å­¦ä¹ å’Œç†è§£ç®—æ³•åŸç†</li>
                            <li>ğŸ¯ å¯¹å…¼å®¹æ€§è¦æ±‚å¾ˆé«˜çš„åœºæ™¯</li>
                            <li>ğŸ¯ ä¸éœ€è¦å®æ—¶å¤„ç†çš„åº”ç”¨</li>
                            <li>ğŸ¯ å¿«é€ŸåŸå‹å¼€å‘</li>
                        </ul>
                    </div>

                    <div class="comparison-box gpu">
                        <h4>é€‚ç”¨åœºæ™¯ - GPUç‰ˆæœ¬</h4>
                        <ul>
                            <li>ğŸš€ ç”Ÿäº§ç¯å¢ƒçš„ç¾é¢œåº”ç”¨</li>
                            <li>ğŸš€ éœ€è¦å®æ—¶å¤„ç†çš„åœºæ™¯</li>
                            <li>ğŸš€ å¯¹æ€§èƒ½è¦æ±‚é«˜çš„åº”ç”¨</li>
                            <li>ğŸš€ ç§»åŠ¨ç«¯ç¾é¢œç›¸æœº</li>
                            <li>ğŸš€ ç›´æ’­ç¾é¢œåŠŸèƒ½</li>
                        </ul>
                    </div>
                </div>
                
                <p style="text-align: center; margin-top: 30px; font-size: 16px; color: #667eea;">
                    <strong>ğŸ’¡ å»ºè®®ï¼šå®é™…é¡¹ç›®ä¸­æ¨èä½¿ç”¨GPUç‰ˆæœ¬ï¼Œæ€§èƒ½å’Œæ•ˆæœéƒ½æœ‰æ˜¾è‘—æå‡ï¼</strong>
                </p>
            </div>
        </div>
    </div>
</body>
</html>

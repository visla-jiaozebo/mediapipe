<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPUç¾é¢œDemo - WebGL ShaderåŠ é€Ÿ</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="alternate icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect width='32' height='32' fill='%23667eea'/><text x='16' y='24' font-family='Arial' font-size='20' text-anchor='middle' fill='white'>ğŸš€</text></svg>">
    
    <link rel="stylesheet" href="styles.css">
    <style>
        /* å¢å¼ºæ ·å¼ï¼Œçªå‡ºGPUåŠ é€Ÿç‰¹ç‚¹ */
        .header h1 {
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .gpu-badge {
            display: inline-block;
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .performance-info {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }
        
        .performance-info h4 {
            margin: 0 0 10px 0;
            font-size: 16px;
        }
        
        .performance-info p {
            margin: 5px 0;
            font-size: 14px;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸš€ GPUåŠ é€Ÿç¾é¢œç³»ç»Ÿ<span class="gpu-badge">WebGL Shader</span></h1>
            <p>åŸºäºGPUç€è‰²å™¨çš„é«˜æ€§èƒ½å®æ—¶ç¾é¢œ - å‚è€ƒGPUPixelå®ç°</p>
            
            <!-- æ€§èƒ½ä¼˜åŠ¿è¯´æ˜ -->
            <div class="performance-info">
                <h4>âš¡ GPUåŠ é€Ÿä¼˜åŠ¿</h4>
                <p>ğŸ“Š ç›¸æ¯”CPUå¤„ç†é€Ÿåº¦æå‡10-50å€ | ğŸ¯ æ›´ç²¾ç¡®çš„é¢éƒ¨å˜å½¢ç®—æ³• | âœ¨ æ›´è‡ªç„¶çš„ç¾é¢œæ•ˆæœ</p>
                <p>ğŸ”¥ åŸºäºOpenGL Shaderå®ç°ï¼Œæ”¯æŒå®æ—¶å¤„ç†</p>
            </div>
        </header>

        <div class="main-content">
            <!-- å›¾ç‰‡ä¸Šä¼ åŒºåŸŸ -->
            <div class="upload-section">
                <div class="upload-area" id="uploadArea">
                    <input type="file" id="imageInput" accept="image/*" style="display: none;">
                    <div class="upload-content">
                        <div class="upload-icon">ğŸš€</div>
                        <p>ç‚¹å‡»æˆ–æ‹–æ‹½ä¸Šä¼ äººè„¸å›¾ç‰‡</p>
                        <small>æ”¯æŒ JPGã€PNG æ ¼å¼ | GPUåŠ é€Ÿå¤„ç†</small>
                    </div>
                </div>
            </div>

            <!-- å›¾ç‰‡æ˜¾ç¤ºå’Œå¤„ç†åŒºåŸŸ -->
            <div class="image-section">
                <div class="image-container">
                    <div class="image-box">
                        <h3>åŸå›¾</h3>
                        <canvas id="originalCanvas"></canvas>
                    </div>
                    <div class="image-box">
                        <h3>GPUç¾é¢œæ•ˆæœ <span style="color: #667eea; font-size: 12px;">âš¡ WebGLåŠ é€Ÿ</span></h3>
                        <canvas id="resultCanvas"></canvas>
                    </div>
                </div>
            </div>

            <!-- ç¾é¢œå‚æ•°æ§åˆ¶é¢æ¿ -->
            <div class="controls-section">
                <h3>ğŸ¨ GPUç¾é¢œå‚æ•°è°ƒæ•´</h3>
                <div class="controls-grid">
                    <!-- çš®è‚¤ç¾åŒ– -->
                    <div class="control-category">
                        <h4>ğŸ’„ çš®è‚¤ç¾åŒ– <span style="color: #667eea; font-size: 12px;">GPU Shader</span></h4>
                        
                        <div class="control-group">
                            <label for="skinSmoothing">åŒè¾¹æ»¤æ³¢ç£¨çš® [skinSmoothing]</label>
                            <div class="slider-container">
                                <input type="range" id="skinSmoothing" min="0" max="1" step="0.1" value="0">
                                <span class="value-display" id="skinSmoothingValue">0</span>
                            </div>
                            <small>GPUåŒè¾¹æ»¤æ³¢ï¼Œä¿è¾¹ç¼˜å»å™ªç‚¹</small>
                        </div>

                        <div class="control-group">
                            <label for="skinBrightening">æ™ºèƒ½ç¾ç™½ [skinBrightening]</label>
                            <div class="slider-container">
                                <input type="range" id="skinBrightening" min="0" max="1" step="0.1" value="0.0">
                                <span class="value-display" id="skinBrighteningValue">0.0</span>
                            </div>
                            <small>GPUè‰²å½©ç©ºé—´è°ƒæ•´ç¾ç™½</small>
                        </div>

                        <div class="control-group">
                            <label for="skinWarmth">æš–è‰²è°ƒèŠ‚ [skinWarmth]</label>
                            <div class="slider-container">
                                <input type="range" id="skinWarmth" min="0" max="1" value="0.0">
                                <span class="value-display" id="skinWarmthValue">0.0</span>
                            </div>
                            <small>GPU HSVç©ºé—´æš–è‰²å¢å¼º</small>
                        </div>
                    </div>

                    <!-- é¢éƒ¨å¡‘å½¢ -->
                    <div class="control-category">
                        <h4>âœ¨ é¢éƒ¨å¡‘å½¢ <span style="color: #667eea; font-size: 12px;">Vertex Shader</span></h4>
                        
                        <div class="control-group">
                            <label for="eyeEnlarge">ç²¾ç¡®å¤§çœ¼ [eyeEnlarge]</label>
                            <div class="slider-container">
                                <input type="range" id="eyeEnlarge" min="0" max="0.3" step="0.03" value="0.0">
                                <span class="value-display" id="eyeEnlargeValue">0.0</span>
                            </div>
                            <small>åŸºäºçœ¼éƒ¨å…³é”®ç‚¹çš„å¾„å‘æ”¾å¤§</small>
                        </div>

                        <div class="control-group">
                            <label for="faceSlim">æ™ºèƒ½ç˜¦è„¸ [faceSlim]</label>
                            <div class="slider-container">
                                <input type="range" id="faceSlim" min="0" max="0.1" step="0.01" value="0.0">
                                <span class="value-display" id="faceSlimValue">0.0</span>
                            </div>
                            <small>æ›²çº¿å˜å½¢ç®—æ³•ï¼Œè‡ªç„¶ç˜¦è„¸</small>
                        </div>
                    </div>

                    <!-- æ•´ä½“è°ƒèŠ‚ -->
                    <div class="control-category">
                        <h4>ğŸ”§ è‰²å½©è°ƒèŠ‚ <span style="color: #667eea; font-size: 12px;">Fragment Shader</span></h4>
                        
                        <div class="control-group">
                            <label for="contrast">å¯¹æ¯”åº¦ [contrast]</label>
                            <div class="slider-container">
                                <input type="range" id="contrast" min="-1" max="1" step="0.1" value="0.0">
                                <span class="value-display" id="contrastValue">0.0</span>
                            </div>
                            <small>GPUå¹¶è¡Œå¯¹æ¯”åº¦è°ƒæ•´</small>
                        </div>

                        <div class="control-group">
                            <label for="saturation">é¥±å’Œåº¦ [saturation]</label>
                            <div class="slider-container">
                                <input type="range" id="saturation" min="-1" max="1" step="0.1" value="0.0">
                                <span class="value-display" id="saturationValue">0.0</span>
                            </div>
                            <small>HSVè‰²å½©ç©ºé—´é¥±å’Œåº¦è°ƒèŠ‚</small>
                        </div>
                    </div>

                    <!-- åŒ–å¦†æ•ˆæœ -->
                    <div class="control-category">
                        <h4>ğŸ’‹ åŒ–å¦†æ•ˆæœ <span style="color: #667eea; font-size: 12px;">WebGL Makeup</span></h4>
                        
                        <div class="control-group">
                            <label for="lipstickIntensity">å£çº¢å¼ºåº¦ [lipstickIntensity]</label>
                            <div class="slider-container">
                                <input type="range" id="lipstickIntensity" min="0" max="1" step="0.1" value="0.4">
                                <span class="value-display" id="lipstickIntensityValue">0.4</span>
                            </div>
                            <small>åŸºäºå”‡éƒ¨å…³é”®ç‚¹çš„ç²¾å‡†ä¸Šå¦†</small>
                        </div>

                        <div class="control-group">
                            <label for="lipstickColor">å£çº¢é¢œè‰² [lipstickColor]</label>
                            <div class="color-controls">
                                <input type="color" id="lipstickColor" value="#ff6b6b">
                                <input type="range" id="lipstickColorHue" min="0" max="360" step="10" value="355" title="è‰²ç›¸">
                                <input type="range" id="lipstickColorSat" min="0" max="100" step="5" value="80" title="é¥±å’Œåº¦">
                            </div>
                            <small>HSVè‰²å½©ç©ºé—´è‡ªå®šä¹‰å”‡è‰²</small>
                        </div>

                        <div class="control-group">
                            <label for="blushIntensity">è…®çº¢å¼ºåº¦ [blushIntensity]</label>
                            <div class="slider-container">
                                <input type="range" id="blushIntensity" min="0" max="1" step="0.1" value="0">
                                <span class="value-display" id="blushIntensityValue">0</span>
                            </div>
                            <small>é¢éƒ¨è½®å»“è¯†åˆ«æ™ºèƒ½è…®çº¢</small>
                        </div>

                        <div class="control-group">
                            <label for="blushColor">è…®çº¢é¢œè‰² [blushColor]</label>
                            <div class="color-controls">
                                <input type="color" id="blushColor" value="#ff9999">
                                <input type="range" id="blushColorHue" min="0" max="360" step="10" value="10" title="è‰²ç›¸">
                                <input type="range" id="blushColorSat" min="0" max="100" step="5" value="60" title="é¥±å’Œåº¦">
                            </div>
                            <small>è‡ªç„¶ç²‰è‰²è°ƒè…®çº¢æ•ˆæœ</small>
                        </div>

                        <div class="control-group">
                            <label for="eyeshadowIntensity">çœ¼å½±å¼ºåº¦ [eyeshadowIntensity]</label>
                            <div class="slider-container">
                                <input type="range" id="eyeshadowIntensity" min="0" max="1" step="0.1" value="0">
                                <span class="value-display" id="eyeshadowIntensityValue">0</span>
                            </div>
                            <small>çœ¼éƒ¨è½®å»“æ¸å˜çœ¼å½±</small>
                        </div>

                        <div class="control-group">
                            <label for="eyeshadowColor">çœ¼å½±é¢œè‰² [eyeshadowColor]</label>
                            <div class="color-controls">
                                <input type="color" id="eyeshadowColor" value="#d4a574">
                                <input type="range" id="eyeshadowColorHue" min="0" max="360" step="10" value="30" title="è‰²ç›¸">
                                <input type="range" id="eyeshadowColorSat" min="0" max="100" step="5" value="50" title="é¥±å’Œåº¦">
                            </div>
                            <small>å¤§åœ°è‰²ç³»çœ¼å½±æ•ˆæœ</small>
                        </div>

                        <div class="control-group">
                            <label for="makeupBlendMode">æ··åˆæ¨¡å¼ [makeupBlendMode]</label>
                            <select id="makeupBlendMode">
                                <option value="0">æ™®é€šæ··åˆ</option>
                                <option value="1">æŸ”å…‰æ··åˆ</option>
                                <option value="2">ç¡¬å…‰æ··åˆ</option>
                                <option value="3">æ­£ç‰‡å åº•</option>
                                <option value="4">å åŠ æ··åˆ</option>
                            </select>
                            <small>ä¸åŒæ··åˆç®—æ³•çš„åŒ–å¦†æ•ˆæœ</small>
                        </div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button id="resetBtn" class="btn btn-secondary">é‡ç½®å‚æ•°</button>
                    <button id="recordBtn" class="btn btn-warning" style="background: linear-gradient(45deg, #ff6b6b, #feca57);">
                        ğŸ¥ å½•åˆ¶è§†é¢‘ (5ç§’)
                    </button>
                    <button id="downloadBtn" class="btn btn-primary">ä¸‹è½½GPUç¾é¢œå›¾ç‰‡</button>
                </div>
            </div>
        </div>

        <!-- åŠ è½½çŠ¶æ€ -->
        <div class="loading" id="loading" style="display: none;">
            <div class="spinner"></div>
            <p>æ­£åœ¨åˆå§‹åŒ–GPUç¾é¢œç³»ç»Ÿ...</p>
        </div>

        <!-- äººè„¸æ£€æµ‹ä¿¡æ¯ -->
        <div class="face-info" id="faceInfo" style="display: none;">
            <h4>ğŸ” æ£€æµ‹ä¿¡æ¯</h4>
            <p id="faceCount">æ£€æµ‹åˆ° 0 å¼ äººè„¸</p>
            <div id="landmarkInfo"></div>
        </div>
    </div>

    <!-- MediaPipe è„šæœ¬ -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js" crossorigin="anonymous"></script>
    
    <!-- WebGLç¾é¢œè„šæœ¬ -->
    <script src="dist/webgl-face-beauty.js"></script>
</body>
</html>
